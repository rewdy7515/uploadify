<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Uploadify</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #121212, #1f1f1f);
        color: #f5f5f5;
        margin: 0;
        min-height: 100vh;
        display: grid;
        place-items: center;
      }
      .card {
        width: min(720px, 92vw);
        background: #181818;
        border: 1px solid #2a2a2a;
        border-radius: 14px;
        padding: 24px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.45);
      }
      h1 {
        margin: 0 0 8px;
        font-size: 28px;
      }
      p {
        margin: 0 0 20px;
        color: #cccccc;
      }
      .actions {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        margin-bottom: 14px;
      }
      button {
        background: #1db954;
        color: #0b0b0b;
        border: none;
        border-radius: 10px;
        padding: 12px 18px;
        font-size: 15px;
        font-weight: 700;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.15s ease, opacity 0.2s;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
      }
      button.secondary {
        background: #242424;
        color: #f5f5f5;
        border: 1px solid #333;
      }
      #downloadBtn.secondary {
        background: #3a3a3a;
        border-color: #5a5a5a;
        color: #ffffff;
      }
      button.ghost {
        background: #ffffff;
        color: #0b0b0b;
        border: 1px solid #d6d6d6;
      }
      button:disabled {
        opacity: 0.55;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }
      button:not(:disabled):hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 26px rgba(0, 0, 0, 0.3);
      }
      .hidden {
        display: none;
      }
      .user {
        display: flex;
        align-items: center;
        gap: 12px;
        margin: 6px 0 14px;
      }
      .avatar {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        object-fit: cover;
        background: #2a2a2a;
        border: 1px solid #2a2a2a;
      }
      .user-name {
        font-weight: 700;
        font-size: 16px;
      }
      .progress-wrap {
        background: #101010;
        border: 1px solid #2a2a2a;
        border-radius: 10px;
        padding: 12px 14px;
        margin-bottom: 14px;
      }
      progress {
        width: 100%;
        height: 12px;
        appearance: none;
        -webkit-appearance: none;
      }
      progress::-webkit-progress-bar {
        background: #2b2b2b;
        border-radius: 20px;
      }
      progress::-webkit-progress-value {
        background: #1db954;
        border-radius: 20px;
      }
      progress::-moz-progress-bar {
        background: #1db954;
        border-radius: 20px;
      }
      #log {
        background: #0f0f0f;
        border: 1px solid #2a2a2a;
        border-radius: 10px;
        padding: 12px;
        min-height: 60px;
        white-space: pre-wrap;
      }
      .selection {
        background: #101010;
        border: 1px solid #2a2a2a;
        border-radius: 10px;
        padding: 12px;
        margin: 12px 0;
      }
      .selection h3 {
        margin: 0 0 8px;
        font-size: 16px;
      }
      .selection label {
        display: flex;
        align-items: center;
        gap: 8px;
        margin: 6px 0;
        cursor: pointer;
      }
      .selection input[type="checkbox"] {
        width: 16px;
        height: 16px;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Uploadify</h1>
      <p id="status">Conecta tu cuenta de Spotify para continuar.</p>

      <div class="actions" id="authRow">
        <button id="loginBtn">Ingresar con Spotify</button>
      </div>
      <div id="userInfo" class="user hidden">
        <img id="avatar" class="avatar" src="" alt="Avatar" />
        <div class="user-name" id="userName"></div>
      </div>
      <div id="switchRow" class="hidden" style="margin: 2px 0 18px;">
        <button id="switchBtn" class="ghost">Iniciar sesión en otra cuenta</button>
      </div>

      <div id="app" class="hidden">
        <div class="actions">
          <button id="exportBtn">Exportar</button>
          <button id="importBtn" class="secondary">Importar</button>
          <button id="downloadBtn" class="secondary hidden">
            Descargar archivo
          </button>
        </div>

        <div id="selection" class="selection hidden">
          <h3>Selecciona qué exportar</h3>
          <label>
            <input type="checkbox" data-key="userName" />
            <span>Nombre de usuario (<span id="count-userName">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-key="profileImage" />
            <span>Foto de perfil (<span id="count-profileImage">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-key="playlists" checked />
            <span>Playlists (<span id="count-playlists">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-key="liked" checked />
            <span>Me gustas (<span id="count-liked">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-key="albums" checked />
            <span>Álbumes guardados (<span id="count-albums">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-key="artists" checked />
            <span>Artistas seguidos (<span id="count-artists">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-key="podcasts" checked />
            <span>Podcasts (<span id="count-podcasts">0</span>)</span>
          </label>
        </div>

        <div id="progressWrap" class="progress-wrap hidden">
          <div style="display: flex; justify-content: space-between; gap: 10px;">
            <span id="progressTitle">Procesando...</span>
            <span id="progressLabel">0%</span>
          </div>
          <progress id="progress" max="100" value="0"></progress>
        </div>

        <input type="file" id="inputFile" hidden />

        <div id="importSelection" class="selection hidden">
          <h3>Selecciona qué importar</h3>
          <label>
            <input type="checkbox" data-imp="userName" disabled />
            <span>Nombre de usuario (<span id="imp-count-userName">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-imp="profileImage" disabled />
            <span>Foto de perfil (<span id="imp-count-profileImage">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-imp="playlists" />
            <span>Playlists (<span id="imp-count-playlists">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-imp="liked" />
            <span>Me gustas (<span id="imp-count-liked">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-imp="albums" />
            <span>Álbumes guardados (<span id="imp-count-albums">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-imp="artists" />
            <span>Artistas seguidos (<span id="imp-count-artists">0</span>)</span>
          </label>
          <label>
            <input type="checkbox" data-imp="podcasts" />
            <span>Podcasts (<span id="imp-count-podcasts">0</span>)</span>
          </label>
          <div class="actions" style="margin-top: 10px;">
            <button id="importGoBtn" class="secondary">Continuar importación</button>
          </div>
        </div>
      </div>

      <pre id="log"></pre>
    </div>

    <script src="script.js"></script>
  </body>
</html>
